\gemshape{1}{0.6}

\draw[dashed] (right) -- (top) -- (left) -- cycle;
\draw[dashed] (midcenter) circle(\r);

\draw[bracket] ([yshift=-2pt]righttop |- rightbottom) -- node[below] {$W(a,b)$} ([yshift=-2pt]left);
\draw[bracket] ([yshift=-9pt]righttop |- rightbottom) -- node[below] {$w(a,b)$} ([yshift=-9pt]lefttop |- leftbottom);
\draw[bracket] ([yshift=-2pt]right) -- node[below] {$c(b)$} ([yshift=-2pt]righttop |- rightbottom);
\draw[bracket] ([shift={(-1.4pt,1.4pt)}]left) -- node[above,sloped] {$D(a)$} ([shift={(-1.4pt,1.4pt)}]top);

\draw[thick,left,blue] (0,-\r) -- node {$r$} (midcenter) -- node {$r\sqrt{2}$} (top);
\draw (midcenter) -- node[below right] {$r$} +(45:\r) -- node[above right] {$r$} (top);
%\draw[thick,red] (left) -- node[sloped,above] {$(r+r\sqrt{2})\sqrt{2}$} (top);
